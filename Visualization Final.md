# Subjective Wealth vs. Objective Wealth

### 1992 年資料相關變項
---
**Info**

zip -> zip 郵遞區號(抽樣地區)
year -> year 調查年度(西元年)
v1 -> v1 性別
age -> age 年齡

**Subjective Wealth**

* v64             -> v64 您給自己的地位打分數(1-10)
* v65a            -> v65a 您認為您屬於那個階級
* v66c            -> v66c 在收入方面給自己打幾分(1-10)
* v66d            -> v66d 在財產方面給自己打幾分(1-10)

以 v65a 作為判斷主觀財富的變項。對應的 value labels 為：
1 = 上層階級，2 = 中上層階級，3 = 中層階級，4 = 中下層階級，5 = 勞工階級，6 = 下層階級

**Objective Wealth**

* v80             -> v80 您現在這個工作每月月入多少元
* v81             -> v81 您個人其他收入平均每月月入多少元

### 1997 年資料相關變項
---
**Info**

zip -> zip 郵遞區號(抽樣地區)
year -> year 調查年度(西元年)
v1 -> v1 性別
age -> age 年齡
v94a -> v94a 您對台灣全面性的生活品質滿意嗎

**Subjective Wealth**

- v86a            -> v86a 您給您現在的地位打幾分
- v87             -> v87 將社會上分成上,中上,中,中下和下層階級您認為您屬於那個階級
- v88             -> v88 將社會上分成資產,中產,勞工階級您認為您屬於那個階級
- v89a            -> v89a 將社會上分成上,中上,中,中下,勞工和下層階級您屬於那個階級

以 v89a 作為判斷主觀財富的變項。

**Objective Wealth**

- v100a           -> v100a 請問您現在這個工作,您個人每個月入多少元(千元)
- v100b           -> v100b 如果答不出來,請從下面選一個大概的範圍
- v101a           -> v101a 您全家人有幾個人有工作收入
- v101b           -> v101B 包括各種收入來源,您全家人的所有收入,每個月大約多少元

### 2002 年資料相關變項
---
**Info**

zip -> zip 郵遞區號(抽樣地區)
year -> year 調查年度(西元年)
v1 -> v1 性別
age -> age 年齡
v138 -> v138 生活狀況滿意度

**Subjective Wealth**

- v115            -> v115 依據什麼來判斷一個人在社會上的成就
- v116            -> v116 您認為您的成就屬於哪一級
- v121            -> v121 依據什麼來判斷一個人在社會上的地位
- v122            -> v122 您給您的地位打幾分
- v125            -> v125 社會分成資本家,小資本家,中產,工和農民階級,您屬於哪級
- v126            -> v126 社會分成上層,中上層,中層,中下層和下層階級,您屬於哪級

以 v126 作為判斷主觀財富的變項，但只有這一年缺少勞工階級的 label
所以請依照以下條件加入勞工階級的分類：
* v126 選擇『中下層』但 v125 選擇『工與農民階級』的樣本

**Objective Wealth**

- v145            -> v145 個人每月收入
- v146a           -> v146a 全家有幾個人有工作收入
- v146b           -> v146b 全家所有收入

### 2007 年資料相關變項
---
**Info**

zip -> zip 郵遞區號(抽樣地區)
year -> year 調查年度(西元年)
a1 -> a1 受訪者性別
age -> age 年齡
g1 -> g1 請問您對您現在整體的生活狀況滿意嗎?

**Subjective Wealth**

f1 -> f1 社會在階級認同上,人的地位有高低.用1~10分代表最低到最高,您給現在的自己打幾分? 
f3 -> f3 假如把社會上所有的人分成資本家,小資本家,中產,勞工和農民階級,您認為您屬於? 
f4 -> f4 假如把社會上所有的人分成上層,中上層,中層,中下層和下層階級,您認為您屬於? 
f5 -> f5 假如把社會上所有的人分成上層,中上層,中層,中下層,勞工階級和下層階級,您屬於?
g1 -> g1 請問您對您現在整體的生活狀況滿意嗎?

以 f5 作為判斷主觀財富的變項。

**Objective Wealth**

h43 -> h43 請問您平均每月的工作收入是多少元?(包括兼差) 
h45 -> h45 包括各種收入來源,您全家人的所有收入,每個月大約多少元?

### 2012 年資料相關變項
---
**Info**

zip -> zip 郵遞區號(抽樣地區)
year -> year 調查年度(西元年)
v1 -> v1 性別
v2r_3 -> v2r_3 請輸入受訪者的年齡(無資訊請鍵入0)
v104 -> v104 整體來說,請問您覺得目前的日子過得快樂嗎?

**Subjective Wealth**

v93 -> v93 我們社會中,有一群人比較接近上層,有一群人比較接近下層,請問您認為您目前屬於哪一層? 
v94 -> v94 假如把社會上所有的人分成上層,中上層,中層,中下層,勞工階級和下層階級,請問您認為您屬於哪個階級?
v109 -> v109 和社會上其他家庭比較起來,請問您目前的家庭收入是比較高,比較低,還是差不多?

以 v94 作為判斷主觀財富的變項。

**Objective Wealth**

v106 -> v106 請問您平均每月所有的工作收入(稅前)差不多有多少(含兼差,包括薪資,年終獎金,年節分紅,加班費,執行業務收入,自營收入等)?
v107 -> v107 請問您配偶(或同居伴侶)平均每月所有的工作收入(稅前)差不多有多少(含兼差,包括薪資,年終獎金,年節分紅,加班費,執行業務收入,自營收入等)?
v108 -> v108 包括各種收入來源,請問您全家人的所有稅前收入,每個月大約多少元(含工作收入,兼業收入與獎金,利息收入,紅利或股息,政府津貼給付,房租收入,退休金等其他收入)?

### 2017 年資料相關變項
---
**Info**

zip -> zip (抽樣地區)郵遞區號
year -> year 調查年(西元年)
a1 -> A1 性別
sdt1 -> sdt 訪問開始日期
a2y -> A2 請問您是什麼時候出生的?出生年 
a2m -> A2 請問您是什麼時候出生的?出生月
a2a -> A2a 請問您大約幾歲?
f4 -> F4 整體來說,請問您覺得目前的日子過得快樂嗎?

2017 年請用 year, sdt1, a2y, a2m, a2a 判斷受訪者的歲數，a2y 和 a2m 優先，若沒有才用 a2a

**Subjective Wealth**

e1 -> E1 社會中分層10層,有些人接近上層(10),有些人接近下層(1),您認為自己是哪一層? 
e2 -> E2 把社會上所有的人分成上層,中上層,中層,中下層,勞工階級和下層階級請問您認為自己屬於那個階級?

以 e2 作為判斷主觀財富的變項。

**Objective Wealth**

f6 -> F6 請問您配偶平均每月所有的工作收入差不多多少?
f7 -> F7 包括各種收入來源,請問您全家人的所有稅前收入,每個月大約多少元?
c4001n -> C40 請問您的第01個工作結束(目前)平均每月所有的工作收入差不多有多少?(新增變項)
c4002n -> C40 請問您的第02個工作結束(目前)平均每月所有的工作收入差不多有多少?(新增變項) 
c4003n -> C40 請問您的第03個工作結束(目前)平均每月所有的工作收入差不多有多少?(新增變項)
...
c4023n -> C40 請問您的第23個工作結束(目前)平均每月所有的工作收入差不多有多少?(新增變項)

### 2022 年資料相關變項
---
**Info**

year -> year 調查年(西元年)
sdt1 -> sdt1 訪問開始時間：__ 月 __ 日
a1 -> a1 性別
a2y -> a2 您是什麼時候出生的?民國年 
a2m -> a2 您是什麼時候出生的?月 
a2r -> a2r 您是什麼時候出生的?忘記出生年/月，回答歲數(實歲)
zipr -> zipr (抽樣地區)郵遞區號重新編碼
f9 -> f9 整體來說，您覺得目前的日子過得快樂嗎?

2022 年請用 year, sdt1, a2y, a2m, a2r 判斷受訪者歲數，沒有 a2y, a2m 才用 a2r

**Subjective Wealth**

e1 -> e1 我們社會中，有一群人比較接近上層，有一群人比較接近下層。您認為您目前屬於哪一層? 
e2 -> e2 假如把社會上所有的人分成上層、中上層、中層、中下層、勞工階級和下層階級，您認為您屬於哪個階級?
f15 -> f15 和社會上其他家庭比較起來，您目前的家庭收入是比較高，比較低，還是差不多?

以 e2 作為判斷主觀財富的變項。

**Objective Wealth**

f12 -> f12 您平均每月所有的工作收入(稅前)差不多有多少? 
f13 -> f13 您配偶(或同居伴侶)平均每月所有的工作收入(稅前)差不多有多少?
f14 -> f14 包括各種收入來源，您全家人的所有稅前收入，每個月大約多少元? 

### 客觀財富分類標準
---
根據臺灣內政部主計處，戶數五等分位組之平均每戶可支配所得（年收入, NT$）的資料如下。
請以這邊的資料判斷該年度，樣本的客觀收入分類（統一以戶為所得單位，如果只有個人收入以下有規則說明），在視覺化頁面中統一呈現為：低、中低、中等、中高、高。

**客觀財富變項選擇規則**
* **所有年份的收入變項皆為類別編碼（categorical codes），需轉換為收入範圍中點值後，乘以 12 轉換為年收入**
* **無效值處理**：編碼 >= 90 的值（包括 96=跳答, 97=不知道, 98=拒答, 99=遺漏值等）自動過濾排除
* 1992 年：個人月收入（v80 + v81），使用類別編碼
	* 將編碼轉換為月收入金額後，以（該月收入 x 12）代表該家戶年所得
	* 若樣本為女性且個人收入顯著低於該年度最低收入分類的標準一半以上（試算年收低於 235,752 / 2 = 117,876），判斷為家庭主婦，該樣本忽略不計
* 1997 年：家戶月收入（v101b），使用類別編碼，將編碼轉換為月收入後 × 12
* 2002 年：家戶月收入（v146b），使用類別編碼，將編碼轉換為月收入後 × 12
* 2007 年：家戶月收入（h45），使用類別編碼，將編碼轉換為月收入後 × 12
* 2012 年：家戶月收入（v108），使用類別編碼，將編碼轉換為月收入後 × 12
* 2017 年：家戶月收入（f7），使用類別編碼，將編碼轉換為月收入後 × 12
* 2022 年：家戶月收入（f14），使用類別編碼，將編碼轉換為月收入後 × 12

**1992 年**
- Bottom 20%: 235,752
- Second 20%: 423,392
- Third 20%: 560,466
- Fourth 20%: 742,466
- Highest 20%: 1,236,408

**1997 年**
- Bottom 20%: 312,458
- Second 20%: 557,429
- Third 20%: 753,919
- Fourth 20%: 1,003,815
- Highest 20%: 1,689,517

**2002 年**
- Bottom 20%: 292,113
- Second 20%: 538,584
- Third 20%: 743,888
- Fourth 20%: 1,005,274
- Highest 20%: 1,799,733

**2007 年**
- Bottom 20%: 312,145
- Second 20%: 571,128
- Third 20%: 799,418
- Fourth 20%: 1,069,885
- Highest 20%: 1,866,791

**2012 年**
- Bottom 20%: 301,362
- Second 20%: 566,814
- Third 20%: 810,075
- Fourth 20%: 1,093,553
- Highest 20%: 1,846,116

**2017 年**
- Bottom 20%: 338,278
- Second 20%: 627,855
- Third 20%: 884,183
- Fourth 20%: 1,191,537
- Highest 20%: 2,052,850

**2022 年**
- Bottom 20%: 364,876
- Second 20%: 672,906
- Third 20%: 954,383
- Fourth 20%: 1,306,283
- Highest 20%: 2,244,401

### 主觀財富分類標準
---
以『將社會上分成上,中上,中,中下,勞工和下層階級您屬於那個階級』這個描述的變項作為判斷主觀財富的依據，即便題目的描述是階級，但這個題目是唯一和主觀財富的概念靠近，且從 1992 問到 2022 年的題目（除了 2002 年少問了勞工階級）。

而 2002 的例外狀況已經在 2002 資料相關變項的地方處理了。

### 視覺化呈現
---
網站應有以下五個 panels:
* Overview
* Geographical View
	* 利用 d3.js 先繪製台灣地圖
		* `./map` 下有 COUNTY(直轄市、縣、市) 和 TOWN(鄉鎮市區) 兩種尺度的界線經緯度檔案 (`Taiwan_COUNTY_GEO.json` 和 `Taiwan_TOWN_GEO.json`, 都是 GeoJSON)
		* 請參考以下範例程式碼，在投影台灣地圖的同時：
			* 請依據比例尺，大於某個尺度呈現 `Taiwan_TOWN_GEO.json`，小於該尺度則呈現 `Taiwan_COUNTY_GEO.json`
			* 在投影地圖區域上加上線條網格，每個網格為大小 150 px 的正方形，此網格大小不受比例尺影響
* Years Analysis (下拉式 panel)
	* 1992 Analysis
	* 1997 Analysis
	* 2002 Analysis
	* 2007 Analysis
	* 2012 Analysis
	* 2017 Analysis
	* 2022 Analysis
	* 每年的 analysis 呈現該年度的 Sankey graph
* Comparison
	* 以折線圖呈現主觀財富、客觀財富和快樂程度的關係
	* 主觀財富和客觀財富變項請標準化，數值刻度呈現在圖左邊的 y 軸上
	* 快樂程度請計算該年樣本的平均，數值刻度呈現在圖右邊的 y 軸上

### 台灣地圖視覺化範例程式碼
---
```JavaScript
// 座標變換函式
// 把 GeoJSON 裡的路徑變成可以投影成地圖的路徑
var path = d3.geo.path().projection(
  d3.geo
    .mercator()
    .center([121, 24])
    .scale(mercatorScale)
    .translate([width/2, height/2.5]) // 讓台灣本島維持在正中間
);

// 判斷視窗縮放
let mercatorScale, w = window.screen.width;
if(w > 1366) { mercatorScale = 11000; }
else if(w <= 1366 && w > 480) { mercatorScale = 9000; }
else { mercatorScale = 6000; }

// d3.js 部分
// 用外層的 div 當 svg 的寬高
const width = (this.$refs.map.offsetWidth).toFixed(),
			height = (this.$refs.map.offsetHeight).toFixed();

// 讓d3抓svg，並寫入寬高
var svg = d3.select('#svg')
            .attr('width', width)
            .attr('height', height)
            .attr('viewBox', `0 0 ${width} ${height}`);

// 讓d3抓GeoJSON檔，並寫入path的路徑
var url = 'dist/taiwan.geojson'; // GeoJSON的檔案路徑
d3.json(url, (error, geometry) => {
  if (error) throw error;

  svg
    .selectAll('path')
    .data(geometry.features)
    .enter().append('path')
    .attr('d', path)
    .attr({
      // 設定id，為了click時加class用
      id: (d) => 'city' + d.properties.COUNTYCODE
    })
    .on('click', d => {
      this.h1 = d.properties.COUNTYNAME; // 換中文名
      this.h2 = d.properties.COUNTYENG; // 換英文名
      // 有 .active 存在，就移除 .active
      if(document.querySelector('.active')) {
        document.querySelector('.active').classList.remove('active');
      }
      // 被點擊的縣市加上 .active
      document.getElementById('city' + d.properties.COUNTYCODE).classList.add('active');
    });
});
```